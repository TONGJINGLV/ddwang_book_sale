# 关于数据库中的使用者（角色）



## DBA

​	通过后端命令行操作，拥有所有权限。（其实就是我们5个）



## 老板

​	需要设计前端。

####  功能

1. 老板登录：用bookstore表中的boospasswd。

![1577500512743](/home/cdkj/.config/Typora/typora-user-images/1577500512743.png)

2. 增加、删除、修改供货商信息（supplier表）。
3. 增加、删除、修改员工信息。（staff表）
4. 修改boss密码和员工登录密码。（bookstore表）



## 书店员工

​	需要设计前端。

#### 功能

 1. **书店员工登录。（用bookstore表中staffpasswd登录）**

 2. **查看订单状况。（考虑按照 未确认、未收货、已完成 分类展示？）**

 3. **确认订单。（update order_time， 同时更新客户的最近活跃时间为当前时间）**

    ![1577501581345](/home/cdkj/.config/Typora/typora-user-images/1577501581345.png)

	4. **图书上下架。（分为自动和手动）**

    - **自动**：只包括下架，上架图书存货为0时，自动将该图书从 上架书目表 删除，添加进未上架书目表。（考虑用触发器在后端实现，不需要前端页面）

      ![1577501769176](/home/cdkj/.config/Typora/typora-user-images/1577501769176.png)

    - **手动**：考虑两种方式（对应两种页面，选择一种实现或者全部实现）

      - 列出所有书目，让书店员工勾选，下面两个按钮：上架、下架，点击则上（下）架勾选的书目。（**这种比较适应的场合是总的书目较少时，管理员可以一键操作，书目成千上百页面很难全部列出时就不太好做。**）
      - 填写书名or书id，书店员工手动一个个上下架，**这个具体的实现逻辑比较复杂，详见注意第1点**。（**这种比较适应书目特多，缺点是需要一种一种书的上下架，不过无所谓，反正也不是我们上班。**）

5. **向供应商进货。**

   ​	供应商在我们这被简化成了一个很没地位的东西。我们假设任意供应商有所有书店需要的书，且售价一模一样。

   ​	那么进货时，书店员工只需要选择向哪个供应商进货即可，进价由暂时书店填写。（**后期补充为另一个表记录各供货商有哪些书售价如何，打破任意供应商有所有书且售价相同的假设**）

6. **查看客户情况。（姓名、电话、最近活跃时间）**



## 客户

​	需要设计前端。

#### 功能

1. 注册（使用手机号注册）、登录、更改密码。

2. 查询图书。（按类别、作者等）

3. 下单功能：此处可能需要实现一个购物车功能（具体实现可能用到session，较为复杂，**如果无法实现可能得简化为一条订单一种书**），有问题后续具体交流。

   基本流程：

   - 用户添加书进入购物车
   - 从购物车下单。

4. 查询自己的订单。

5. 确认收货。



#### 注意

1. 关于book， Stock， Stock_notsale这三个表：book的逻辑含义应当是书店所有可能销售的书（全集），Stock， Stock_notsale中的书应该包含在book表中（子集）。

   ![1577503450252](/home/cdkj/.config/Typora/typora-user-images/1577503450252.png)

   针对这种上下架功能，可能需要的逻辑会有（以图书上架为例，下架同理）

   - 根据书名先在book表中查找图书
     - 如果有此书，查找Stock_unsale表，若此书在Stock_unsale中，删除此记录。并将书插入Stock表中。
     - 如果无，询问是否确认上架。若确认：先向book表中插入一本新书，再更新Stock表。